(function(a){a.NBMap=function(b){var a=b?b:{},c=this;this.put=function(d,b){a[d]=b;return c};this.get=function(b){return a[b]};this.remove=function(b){delete a[b]};this.data=function(){return a}}})(jQuery);(function(d){var c="WebKitCSSMatrix"in window&&"m11"in new WebKitCSSMatrix,b="ontouchstart"in window,k=/iphone|ipad|android/gi.test(navigator.appVersion),l="onorientationchange"in window?"orientationchange":"resize",m=b?"touchstart":"mousedown",i=b?"touchmove":"mousemove",j=b?"touchend":"mouseup",g=b?"touchcancel":"mouseup",f="translate"+(c?"3d(":"("),e=c?",0)":")",a=Math,h=function(d,h){var a=this,i=document,g;a.wrapper=typeof d==="object"?d:i.getElementById(d);a.wrapper.style.overflow="hidden";a.scroller=a.wrapper.children[0];a.scroller.style.cssText+="-webkit-transition-property:-webkit-transform;-webkit-transform-origin:0 0;-webkit-transform:"+f+"0,0"+e;a.scroller.style.cssText+="-webkit-transition-timing-function:cubic-bezier(0.33,0.66,0.66,1);-webkit-transition-duration:0;";a.options={hScroll:true,vScroll:true,bounce:c,bounceLock:false,momentum:c,lockDirection:true,hScrollbar:true,vScrollbar:true,fixedScrollbar:false,fadeScrollbar:k&&c||!b,hideScrollbar:k||!b,scrollbarClass:"",onScrollStart:null,onScrollEnd:null};for(g in h)a.options[g]=h[g];a.options.hScrollbar=a.options.hScroll&&a.options.hScrollbar;a.options.vScrollbar=a.options.vScroll&&a.options.vScrollbar;a.refresh();a._bind(l,window);a._bind(m)};h.prototype={x:0,y:0,handleEvent:function(b){var a=this;switch(b.type){case m:a._start(b);break;case i:a._move(b);break;case j:case g:a._end(b);break;case"webkitTransitionEnd":a._transitionEnd(b);break;case l:a._resize()}},_scrollbar:function(c){var b=this,g=document,d;if(!b[c+"Scrollbar"]){if(b[c+"ScrollbarWrapper"]){b[c+"ScrollbarIndicator"].style.webkitTransform="";b[c+"ScrollbarWrapper"].parentNode.removeChild(b[c+"ScrollbarWrapper"]);b[c+"ScrollbarWrapper"]=null;b[c+"ScrollbarIndicator"]=null}return}if(!b[c+"ScrollbarWrapper"]){d=g.createElement("div");if(b.options.scrollbarClass)d.className=b.options.scrollbarClass+c.toUpperCase();else d.style.cssText="position:absolute;z-index:100;"+(c==="h"?"height:7px;bottom:1px;left:2px;right:7px":"width:6px;bottom:7px;top:2px;right:1px");d.style.cssText+="pointer-events:none;-webkit-transition-property:opacity;-webkit-transition-duration:"+(b.options.fadeScrollbar?"350ms":"0")+";overflow:hidden;opacity:"+(b.options.hideScrollbar?"0":"1");b.wrapper.appendChild(d);b[c+"ScrollbarWrapper"]=d;d=g.createElement("div");if(!b.options.scrollbarClass)d.style.cssText="position:absolute;z-index:100;background:rgba(0,0,0,0.5);border:1px solid rgba(255,255,255,0.9);-webkit-background-clip:padding-box;-webkit-box-sizing:border-box;"+(c==="h"?"height:100%;-webkit-border-radius:4px 3px;":"width:100%;-webkit-border-radius:3px 4px;");d.style.cssText+="pointer-events:none;-webkit-transition-property:-webkit-transform;-webkit-transition-timing-function:cubic-bezier(0.33,0.66,0.66,1);-webkit-transition-duration:0;-webkit-transform:"+f+"0,0"+e;b[c+"ScrollbarWrapper"].appendChild(d);b[c+"ScrollbarIndicator"]=d}if(c==="h"){b.hScrollbarSize=b.hScrollbarWrapper.clientWidth;b.hScrollbarIndicatorSize=a.max(a.round(b.hScrollbarSize*b.hScrollbarSize/b.scrollerW),8);b.hScrollbarIndicator.style.width=b.hScrollbarIndicatorSize+"px";b.hScrollbarMaxScroll=b.hScrollbarSize-b.hScrollbarIndicatorSize;b.hScrollbarProp=b.hScrollbarMaxScroll/b.maxScrollX}else{b.vScrollbarSize=b.vScrollbarWrapper.clientHeight;b.vScrollbarIndicatorSize=a.max(a.round(b.vScrollbarSize*b.vScrollbarSize/b.scrollerH),8);b.vScrollbarIndicator.style.height=b.vScrollbarIndicatorSize+"px";b.vScrollbarMaxScroll=b.vScrollbarSize-b.vScrollbarIndicatorSize;b.vScrollbarProp=b.vScrollbarMaxScroll/b.maxScrollY}b._indicatorPos(c,true)},_resize:function(){var a=this;setTimeout(function(){a.refresh()},0)},_pos:function(b,c){var a=this;a.x=a.hScroll?b:0;a.y=a.vScroll?c:0;a.scroller.style.webkitTransform=f+a.x+"px,"+a.y+"px"+e;a._indicatorPos("h");a._indicatorPos("v")},_indicatorPos:function(b,d){var a=this,c=b==="h"?a.x:a.y;if(!a[b+"Scrollbar"])return;c=a[b+"ScrollbarProp"]*c;if(c<0){c=a.options.fixedScrollbar?0:c+c*3;if(a[b+"ScrollbarIndicatorSize"]+c<9)c=-a[b+"ScrollbarIndicatorSize"]+8}else if(c>a[b+"ScrollbarMaxScroll"]){c=a.options.fixedScrollbar?a[b+"ScrollbarMaxScroll"]:c+(c-a[b+"ScrollbarMaxScroll"])*3;if(a[b+"ScrollbarIndicatorSize"]+a[b+"ScrollbarMaxScroll"]-c<9)c=a[b+"ScrollbarIndicatorSize"]+a[b+"ScrollbarMaxScroll"]-8}a[b+"ScrollbarWrapper"].style.webkitTransitionDelay="0";a[b+"ScrollbarWrapper"].style.opacity=d&&a.options.hideScrollbar?"0":"1";a[b+"ScrollbarIndicator"].style.webkitTransform=f+(b==="h"?c+"px,0":"0,"+c+"px")+e},_transitionTime:function(b){var a=this;b+="ms";a.scroller.style.webkitTransitionDuration=b;if(a.hScrollbar)a.hScrollbarIndicator.style.webkitTransitionDuration=b;if(a.vScrollbar)a.vScrollbarIndicator.style.webkitTransitionDuration=b},_start:function(d){var a=this,e=b?d.changedTouches[0]:d,c;a.moved=false;setTimeout(function(){a.refresh()},0);!/^(input|select|textarea)$/.test(d.target.nodeName.toLowerCase())&&d.preventDefault();a.moved=false;a.distX=0;a.distY=0;a.absDistX=0;a.absDistY=0;a.dirX=0;a.dirY=0;a.returnTime=0;a._transitionTime(0);if(a.options.momentum){c=new WebKitCSSMatrix(window.getComputedStyle(a.scroller,null).webkitTransform);if(c.m41!==a.x||c.m42!==a.y){a._unbind("webkitTransitionEnd");a._pos(c.m41,c.m42)}}a.scroller.style.webkitTransitionTimingFunction="cubic-bezier(0.33,0.66,0.66,1)";if(a.hScrollbar)a.hScrollbarIndicator.style.webkitTransitionTimingFunction="cubic-bezier(0.33,0.66,0.66,1)";if(a.vScrollbar)a.vScrollbarIndicator.style.webkitTransitionTimingFunction="cubic-bezier(0.33,0.66,0.66,1)";a.startX=a.x;a.startY=a.y;a.pointX=e.pageX;a.pointY=e.pageY;a.startTime=d.timeStamp;a.options.onScrollStart&&a.options.onScrollStart.call(a);a._bind(i);a._bind(j);a._bind(g)},_move:function(h){if(b&&h.touches.length>1)return;var c=this,i=b?h.changedTouches[0]:h,d=i.pageX-c.pointX,e=i.pageY-c.pointY,f=c.x+d,g=c.y+e;h.preventDefault();c.pointX=i.pageX;c.pointY=i.pageY;if(f>0||f<c.maxScrollX)f=c.options.bounce?c.x+d/2.4:f>=0||c.maxScrollX>=0?0:c.maxScrollX;if(g>0||g<c.maxScrollY)g=c.options.bounce?c.y+e/2.4:g>=0||c.maxScrollY>=0?0:c.maxScrollY;if(c.absDistX<4&&c.absDistY<4){c.distX+=d;c.distY+=e;c.absDistX=a.abs(c.distX);c.absDistY=a.abs(c.distY);return}if(c.options.lockDirection)if(c.absDistX>c.absDistY+3){g=c.y;e=0}else if(c.absDistY>c.absDistX+3){f=c.x;d=0}c.moved=true;c._pos(f,g);c.dirX=d>0?-1:d<0?1:0;c.dirY=e>0?-1:e<0?1:0;if(h.timeStamp-c.startTime>300){c.startTime=h.timeStamp;c.startX=c.x;c.startY=c.y}},_end:function(d){if(b&&d.touches.length!==0)return;var c=this,m=b?d.changedTouches[0]:d,l,n,e={dist:0,time:0},f={dist:0,time:0},o=d.timeStamp-c.startTime,h=c.x,k=c.y,p;c._unbind(i);c._unbind(j);c._unbind(g);if(!c.moved){if(b){c.doubleTapTimer=null;l=m.target;while(l.nodeType!==1)l=l.parentNode;n=document.createEvent("MouseEvents");n.initMouseEvent("click",true,true,d.view,1,m.screenX,m.screenY,m.clientX,m.clientY,d.ctrlKey,d.altKey,d.shiftKey,d.metaKey,0,null);n._fake=true;l.dispatchEvent(n)}c._resetPos();return}if(o<300&&c.options.momentum){e=h?c._momentum(h-c.startX,o,-c.x,c.scrollerW-c.wrapperW+c.x,c.options.bounce?c.wrapperW:0):e;f=k?c._momentum(k-c.startY,o,-c.y,c.maxScrollY<0?c.scrollerH-c.wrapperH+c.y:0,c.options.bounce?c.wrapperH:0):f;h=c.x+e.dist;k=c.y+f.dist;if(c.x>0&&h>0||c.x<c.maxScrollX&&h<c.maxScrollX)e={dist:0,time:0};if(c.y>0&&k>0||c.y<c.maxScrollY&&k<c.maxScrollY)f={dist:0,time:0}}if(e.dist||f.dist){p=a.max(a.max(e.time,f.time),10);c.scrollTo(h,k,p);return}c._resetPos(200)},_resetPos:function(d){var a=this,b=a.x,c=a.y;if(a.x>=0)b=0;else if(a.x<a.maxScrollX)b=a.maxScrollX;if(a.y>=0||a.maxScrollY>0)c=0;else if(a.y<a.maxScrollY)c=a.maxScrollY;if(b===a.x&&c===a.y){if(a.moved){a.options.onScrollEnd&&a.options.onScrollEnd.call(a);a.moved=false}if(a.hScrollbar&&a.options.hideScrollbar){a.hScrollbarWrapper.style.webkitTransitionDelay="30ms";a.hScrollbarWrapper.style.opacity="0"}if(a.vScrollbar&&a.options.hideScrollbar){a.vScrollbarWrapper.style.webkitTransitionDelay="30ms";a.vScrollbarWrapper.style.opacity="0"}return}if(d){a.scroller.style.webkitTransitionTimingFunction="cubic-bezier(0.33,0.0,0.33,1)";if(a.hScrollbar)a.hScrollbarIndicator.style.webkitTransitionTimingFunction="cubic-bezier(0.33,0.0,0.33,1)";if(a.vScrollbar)a.vScrollbarIndicator.style.webkitTransitionTimingFunction="cubic-bezier(0.33,0.0,0.33,1)"}a.scrollTo(b,c,d||0)},_transitionEnd:function(b){var a=this;b&&b.stopPropagation();a._unbind("webkitTransitionEnd");a._resetPos(a.returnTime);a.returnTime=0},_momentum:function(h,l,f,e,i){var k=this,g=6e-4,c=a.abs(h)/l,b=c*c/(2*g),j=0,d=0;if(h>0&&b>f){d=i/(6/(b/c*g));f=f+d;k.returnTime=800/i*d+100;c=c*f/b;b=f}else if(h<0&&b>e){d=i/(6/(b/c*g));e=e+d;k.returnTime=800/i*d+100;c=c*e/b;b=e}b=b*(h<0?-1:1);j=c/g;return{dist:b,time:a.round(j)}},_bind:function(a,b){(b||this.scroller).addEventListener(a,this,false)},_unbind:function(a,b){(b||this.scroller).removeEventListener(a,this,false)},refresh:function(){var a=this;a.wrapperW=a.wrapper.clientWidth;a.wrapperH=a.wrapper.clientHeight;a.scrollerW=a.scroller.offsetWidth;a.scrollerH=a.scroller.offsetHeight;a.maxScrollX=a.wrapperW-a.scrollerW;a.maxScrollY=a.wrapperH-a.scrollerH;a.dirX=0;a.dirY=0;a._transitionTime(0);a.hScroll=a.options.hScroll&&a.maxScrollX<0;a.vScroll=a.options.vScroll&&(!a.options.bounceLock&&!a.hScroll||a.scrollerH>a.wrapperH);a.hScrollbar=a.hScroll&&a.options.hScrollbar;a.vScrollbar=a.vScroll&&a.options.vScrollbar&&a.scrollerH>a.wrapperH;a._scrollbar("h");a._scrollbar("v");a._resetPos()},scrollTo:function(d,e,c,f){var b=this;if(f){d=b.x-d;e=b.y-e}c=!c||a.round(b.x)===a.round(d)&&a.round(b.y)===a.round(e)?0:c;b.moved=true;c&&b._bind("webkitTransitionEnd");b._transitionTime(c);b._pos(d,e);!c&&setTimeout(function(){b._transitionEnd()},0)}};d(document).ready(function(){var b=new d.NBMap,a="sckey";d.fn.scrollTo=function(d){var c=b.get(this.attr(a));c&&c.scrollTo(0,d,250);return this};d.fn.disScroll=function(){b.remove(this.attr(a));return this};d.fn.scroll=function(d){if(b.get(this.attr(a)))return this;this.wrapInner("<div></div>");var e=this.find(".scroll"),c=null;if(e.length==0)c=new h(this.get(0),d);else c=new h(e[0],d);var f=a+(new Date).getTime();b.put(f,c);this.attr(a,f);return this}})})(jQuery);(function(a){a.NBSection=function(m){var c=1,b=[],j=".back",g=m.process,d=true;a.fn.doNavigation=function(j){a(":focus").blur();var c=a("section>.current"),f=this;if(f.is(".current"))return this;var g=j?"right":"left",i=function(){c.unbind("webkitAnimationEnd",i);c.removeClass(g+" out current");f.removeClass(g+" in");h(f);c.attr("remove")&&c.disScroll().remove()};setTimeout(function(){c.addClass(g+" out").bind("webkitAnimationEnd",i);f.addClass(g+" in current");},10);if(j)b.shift();else if(!c.attr("remove"))e(f);else d=false;return this};var e=function(a){b.unshift({page:a,hash:"#"+a.attr("id"),id:a.attr("id")})},f=function(g,f){var e=a(g),b=f.referrer,d=b.attr("remove");d&&e.attr("remove",d);e.attr("id","n-"+ ++c).appendTo("section").doNavigation().scroll();b.attr("rhref",b.attr("href")).attr("href","#n-"+c)},h=function(b){var a=b.attr("id");!a&&b.attr("id",a="n-"+c);location.hash=a},l=function(){if(d){if(location.hash!==b[0].hash)b.length>1&&b[1].page.doNavigation(true)}else d=true},i=function(b,c){if(/^#/.test(b)){var e=a(b);e.length!==0&&e.doNavigation()}else{var d=function(){a.ajax({url:b,cache:false,dataType:'text',success:function(a){f(a,c)}})};if(typeof g==="function")!g({insert:function(a){f(a,c)},href:b,referrer:c.referrer})&&d();else d()}},k=function(e){var c=a(e.target),d=c.attr("href");if(c.is(j))b.length>1&&b[1].page.doNavigation(true);else"#"!==d&&i(d,{referrer:c})};a(document).ready(function(){var b=a("section");b.children().each(function(){a(this).scroll()});b.children(".current").length===0&&b.children(":first").addClass("current");var c=b.children(".current");h(c);e(c);a(window).bind("hashchange",function(){l()});a(document.body).bind("click",function(b){$el=a(b.target);if($el&&$el.attr("href")){b.preventDefault();$el.trigger("tap",b)}}).bind("tap",k)});return this}})(jQuery);(function(a){a.NBData=function(d){var e=window.openDatabase("DATA_DB","1.0","data of $.NBData",1024*1024*2),c="REQUESTS",h="RID",f="JSONDATA";e.transaction(function(a){a.executeSql("CREATE TABLE IF NOT EXISTS "+c+"("+h+" INTEGER PRIMARY KEY AUTOINCREMENT, "+f+")")});var b=function(a,b){a&&a(b)},n=this.ready=function(a){e.transaction(function(d){d.executeSql("SELECT * FROM "+c,[],function(j,g){for(var d=[],c=0;c<g.rows.length;++c){var e=g.rows.item(c),i=JSON.parse(e[f]);i.id=e[h];d.push(i)}b(a.ready,d)},function(){b(a.ready,[])})})},l=function(a){e.transaction(function(b){b.executeSql("DELETE FROM "+c+" WHERE "+h+"=?",[a])})};d.ready&&this.ready(d);var k=function(a){e.transaction(function(d){d.executeSql("INSERT INTO "+c+"("+f+") VALUES(?)",[a.jsondata],function(d,c){b(a.complete,{issuccess:true,detail:c})},function(d,c){b(a.complete,{issuccess:false,detail:c})})})},j=d.rootURL?d.rootURL:"",g=new a.NBMap,m=0,i=0;a.navigationTo=function(c){var e=false,d=false;if(c.keepTo){e=a(c.keepTo).find(">a:last");d=e.attr("id");if(e.length!==0&&d&&d.indexOf("_nav")!==-1){e.trigger("tap");return}}d="_nav"+ ++m;e=a('<a id="'+d+'" href="'+c.url+'"'+(c.json?' json="'+c.json+'"':"")+(c.data?' params="'+c.data+'"':"")+(c.cacheKey?' cacheKey="'+c.cacheKey+'"':"")+(c.remote?' remote="true"':"")+(c.keepTo?"":' remove="true"')+"></a>");e.appendTo(!c.keepTo?"body":c.keepTo).trigger("tap");g.put(d,{complete:function(){!c.keepTo&&e.remove();g.remove(d);b(c.complete)},options:c})};a.sendRequest=function(c){var d={type:"cache",online:navigator.onLine};if(c._$saveTime)if(!navigator.onLine){b(c.error,d);b(c.complete);return}var e=function(){if(c._$saveTime){b(c.error,d);b(c.complete)}else{c._$saveTime=(new Date).getTime();k({jsondata:JSON.stringify(c),complete:function(a){d.issuccess=a.issuccess;d.detail=a.detail;b(c.error,d)}})}};if(!navigator.onLine)e();else{d.type="jsonp";a.ajax({url:(c.rootURL?c.rootURL:j)+c.url,dataType:d.type,timeout:c.timeout?c.timeout:i,data:c.data,success:function(a){c._$saveTime&&l(c.id);b(c.success,a)},error:function(){e()},complete:function(){b(c.complete)}})}};this.NBSection=new a.NBSection({process:function(e){var c=e.referrer,d=c.attr("json");if(d){var f=function(o){var o=a("<div></div>").setTemplate(o),n=c.attr("params");if(n)for(var r=n.split("&"),p=0;p<r.length;p++){var s=r[p].split("=");o.setParam(s[0],s[1])}var f=g.get(c.attr("id"));f=f?f:{options:{}};var m=function(a){e.insert(o.processTemplate(typeof a==="object"?a:eval("("+a+")")));b(f.complete)},k=c.attr("cacheKey"),h={type:"cache",online:navigator.onLine};if(k&&!navigator.onLine){var l=localStorage.getItem(k);if(l){b(f.options.success,h);m(l)}else b(f.options.error,h)}else{if(k){var l=localStorage.getItem(k);if(l){b(f.options.success,h);m(l);return}}var q=c.attr("remote");h.type=q==="true"?"jsonp":"text";if(!navigator.onLine&&h.type=="jsonp"){b(f.options.error,h);return}a.ajax({url:q==="true"?(f.options.rootURL?f.options.rootURL:j)+d:d,cache:false,data:n,timeout:f.options.timeout?f.options.timeout:i,dataType:h.type,success:function(a){if(typeof a!=="object")a=eval("("+a+")");if(k){a._saveTime=(new Date).getTime();localStorage.setItem(k,JSON.stringify(a))}b(f.options.success,h);m(a)},error:function(){b(f.options.error,h)}})}};a.ajax({url:e.href,cache:false,dataType:"text",success:f});return true}return false}});return this};var b=null;a.NBSetup=function(c){c=a.extend({},c);if(b)return b;var d=this.NBData=new a.NBData({rootURL:c.rootURL,ready:c.ready});this.requests=function(a){d.ready(a)};return b=this}})(jQuery)